## Java Controller `find` メソッドの改善案

### 問題点

現在の Java Controller の `find` メソッドは、検索条件をリクエストボディから JSON 形式で受け取っています。

```java
public CompletionStage<Result> find(Http.Request request) {
    int offset = request.queryString("offset").map(Integer::parseInt).orElse(0);
    int limit = request.queryString("limit").map(Integer::parseInt).orElse(Integer.MAX_VALUE);
    JsonNode json = request.body().asJson(); // <--- 問題点
    Users filter = json == null ? new Users() : Json.fromJson(json, Users.class);
    return usersService.find(filter, offset, limit).thenApply(result -> ok(result));
}
```

GETリクエストでリクエストボディを使用することは、HTTPの仕様上は明確に禁止されてはいませんが、一般的な慣例として推奨されていません。多くのフレームワークやプロキシ、キャッシュサーバーなどがGETリクエストにボディが含まれていることを想定しておらず、予期せぬ動作を引き起こす可能性があります。

### 改善案

検索条件をリクエストボディではなく、クエリパラメータで受け取るように変更します。これにより、RESTfulなAPIの慣例に準拠し、より広く受け入れられる実装になります。

`find` メソッドは、`request.queryString()` を使用して各検索条件を個別に取得し、それらを元にフィルターオブジェクトを構築するように変更します。

### 修正後のコード例 (`UsersController.java`)

```java
import java.util.Arrays;
import java.util.Map;
import java.util.Optional;
import com.fasterxml.jackson.databind.ObjectMapper;

// ...

public CompletionStage<Result> find(Http.Request request) {
    int offset = request.queryString("offset").map(Integer::parseInt).orElse(0);
    int limit = request.queryString("limit").map(Integer::parseInt).orElse(Integer.MAX_VALUE);

    // クエリパラメータからMap<String, String>を作成
    Map<String, String> params = request.queryString()
            .entrySet().stream()
            .collect(Collectors.toMap(Map.Entry::getKey, entry -> entry.getValue()[0]));

    // MapをUsersオブジェクトに変換
    ObjectMapper mapper = new ObjectMapper();
    Users filter = mapper.convertValue(params, Users.class);

    return usersService.find(filter, offset, limit).thenApply(result -> ok(result));
}
```

### この改善による利点

1.  **RESTful API の慣例への準拠**: GETリクエストはリソースの取得に用いられ、パラメータはURL（クエリ文字列）に含まれるべきという一般的な設計原則に従います。
2.  **キャッシュ効率の向上**: URLにパラメータが含まれるため、HTTPキャッシュが正しく機能し、パフォーマンスが向上する可能性があります。
3.  **アクセシビリティとデバッグの容易さ**: URLを共有したり、ブラウザやcurlなどのツールで直接テストしたりするのが容易になります。
4.  **互換性の向上**: リクエストボディを持つGETリクエストを正しく扱えないクライアントやプロキシとの互換性が向上します。

### 実装方針

1.  `index.html` のコード生成ロジックを修正し、上記のコード例のように、クエリパラメータからフィルターオブジェクトを構築する `find` メソッドを生成するように変更します。
2.  `exportCsv` メソッドも同様にリクエストボディを使用しているため、こちらもクエリパラメータを使用するように併せて修正します。
